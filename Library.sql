--------------LMS_MEMBERS---------------
CREATE TABLE LMS_MEMBERS(MEMBER_ID VARCHAR2(10)PRIMARY KEY,MEMBER_NAME VARCHAR(30)NOT NULL,CITY VARCHAR2(20),DATE_REGISTER DATE,
                            DATE_EXPIRE DATE,MEMBERSHIP_STATUS VARCHAR2(15)NOT NULL);


INSERT INTO LMS_MEMBERS VALUES('LM001','AMIT','CHENNAI','12-02-2012','11-02-2013','Temporary');
INSERT INTO LMS_MEMBERS VALUES('LM002','ABDHUL','DELHI','10-04-2012','09-04-2013','Temporary');
INSERT INTO LMS_MEMBERS VALUES('LM003','GAYAN','CHENNAI','13-05-2012','12-05-2013','Permanent');
INSERT INTO LMS_MEMBERS VALUES('LM004','RADHA','CHENNAI','22-04-2012','21-04-2013','Temporary');
INSERT INTO LMS_MEMBERS VALUES('LM005','GURU','BANGALORE','30-03-2012','16-05-2013','Temporary');
INSERT INTO LMS_MEMBERS VALUES('LM006','MOHAN','CHENNAI','12-04-2012','16-05-2013','Temporary');

DESCRIBE LMS_MEMBERS;
SELECT * FROM LMS_MEMBERS;

--------------LMS_SUPPLIERES_DETAILS---------------
CREATE TABLE LMS_SUPPLIERS_DETAILS (SUPPLIER_ID VARCHAR2(3)PRIMARY KEY,SUPPLIER_NAME VARCHAR(30)NOT NULL,ADDRESS VARCHAR2(50),
                                    CONTACT NUMBER(10)NOT NULL,EMAIL VARCHAR(15)NOT NULL);
                                    
INSERT INTO LMS_SUPPLIERS_DETAILS VALUES('s01','SINGAPORE SHOPPEE','CHENNAI',9894123555,'sing@gmail.com');
INSERT INTO LMS_SUPPLIERS_DETAILS VALUES('s02','JK STORES','MUMBAI',9940123450,'jks@yahoo.com');
INSERT INTO LMS_SUPPLIERS_DETAILS VALUES('s03','ROSE BOOK STORE','TRIVANDRAM',9444411222,'rose@gmail.com');
INSERT INTO LMS_SUPPLIERS_DETAILS VALUES('s04','KAVARI  STORE','DELHI',8630001452,'kavi@redif.com');
INSERT INTO LMS_SUPPLIERS_DETAILS VALUES('s05','EINSTEN BOOK GALLERY','US',9542000001,'eingal@aol.com');
INSERT INTO LMS_SUPPLIERS_DETAILS VALUES('s06','AKBAR STORE','MUMBAI',7855623100,'akbakst@aol.com');

DESCRIBE LMS_SUPPLIERS_DETAILS;
SELECT * FROM LMS_SUPPLIERS_DETAILS;
--------------LMS_FINE_DETAILS---------------
CREATE TABLE LMS_FINE_DETAILS (FINE_RANGE VARCHAR2(3)PRIMARY KEY,FINE_AMOUNT NUMBER(10,2)NOT NULL);

INSERT INTO LMS_FINE_DETAILS VALUES ('R0',0);
INSERT INTO LMS_FINE_DETAILS VALUES ('R1',20);
INSERT INTO LMS_FINE_DETAILS VALUES ('R2',50);
INSERT INTO LMS_FINE_DETAILS VALUES ('R3',75);
INSERT INTO LMS_FINE_DETAILS VALUES ('R4',100);
INSERT INTO LMS_FINE_DETAILS VALUES ('R5',150);
INSERT INTO LMS_FINE_DETAILS VALUES ('R6',200);

DESCRIBE LMS_FINE_DETAILS;
SELECT * FROM LMS_FINE_DETAILS;

--------------LMS_BOOK_DETAILS---------------
CREATE TABLE LMS_BOOK_DETAILS (BOOK_CODE VARCHAR(10)PRIMARY KEY,BOOK_TITLE VARCHAR2(50)NOT NULL,CATEGORY VARCHAR2(15)NOT NULL,AUTHOR VARCHAR2(30)NOT NULL,
                                PUBLICATION VARCHAR2(30),PUBLISH_DATE DATE,BOOK_EDITION NUMBER(2),PRICE NUMBER(8,2)NOT NULL,
                                RACK_NUM VARCHAR2(3),DATE_ARRIVAL DATE NOT NULL,SUPPLIER_ID VARCHAR2(3)NOT NULL,
                                FOREIGN KEY (SUPPLIER_ID) REFERENCES LMS_SUPPLIERS_DETAILS (SUPPLIER_ID)) ;

INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000001','Java How to Program','JAVA','Paul j.deitel','Prentice Hall','10-12-1999',6,600.00,'A1','10-052011','s01');
INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000002','Java: The Complete Reeference','JAVA','Herbert Schildt','Tata Mcgraw Hill','10-10-2011',5,750.00,'A1','10-052011','s01');
INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000003','Java How to Program','JAVA','Paul j.deitel','Prentice Hall','10-05-1999',6,600.00,'A1','10-052011','s01');
INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000004','Java: The Complete Reeference','JAVA','Herbert Schildt','Tata Mcgraw Hill','10-12-1999',5,750.00,'A1','10-052011','s01');
INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000005','Java How to Program','JAVA','Paul j.deitel','Prentice Hall','10-10-2011',6,600,'A1','10-052011','s01');
INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000006','Java: The Complete Reeference','JAVA','Herbert Schildt','Tata Mcgraw Hill','10-10-2011',6,600,'A1','10-052011','s01');
INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000007','Let Us C','C','Yashavnt kanetkar','BPB Publications','11-12-2010',6,600,'A1','10-052011','s01');
INSERT INTO LMS_BOOK_DETAILS VALUES ('BL000008','Let Us C','C','Yashavnt kanetkar','BPB Publications','12-05-2010',6,600,'A1','10-052011','s01');
                                
DESCRIBE LMS_BOOK_DETAILS;
SELECT * FROM LMS_BOOK_DETAILS;
                                
--------------LMS_BOOK_ISSUE---------------
CREATE TABLE LMS_BOOK_ISSUE (BOOK_ISSUE_NUMBER NUMBER PRIMARY KEY,MEMBER_ID VARCHAR2(10)NOT NULL,BOOK_CODE VARCHAR2(10)NOT NULL,
                                DATE_ISSUE DATE NOT NULL,DATE_RETURN DATE NOT NULL,DATE_RETURNED DATE NULL,
                                BOOK_ISSUE_STATUS VARCHAR2(20),FINE_RANGE VARCHAR2(3),FOREIGN KEY (MEMBER_ID) REFERENCES LMS_MEMBERS(MEMBER_ID),
                                FOREIGN KEY (BOOK_CODE)REFERENCES LMS_BOOK_DETAILS(BOOK_CODE),
                                FOREIGN KEY (FINE_RANGE)REFERENCES LMS_FINE_DETAILS(FINE_RANGE));
                                
INSERT INTO LMS_BOOK_ISSUE VALUES (001,'LM001','BL000001','01-05-2012','16-05-2012','16-05-2012','','R0');
INSERT INTO LMS_BOOK_ISSUE VALUES (002,'LM002','BL000002','01-05-2012','06-05-2012','16-05-2012','','R2');
INSERT INTO LMS_BOOK_ISSUE VALUES (003,'LM003','BL000007','01-04-2012','16-04-2012','20-04-2012','','R1');
INSERT INTO LMS_BOOK_ISSUE VALUES (004,'LM004','BL000005','01-04-2012','16-04-2012','20-04-2012','','R1');
INSERT INTO LMS_BOOK_ISSUE VALUES (005,'LM005','BL000008','30-03-2012','15-04-2012','20-04-2012','','R1');
INSERT INTO LMS_BOOK_ISSUE VALUES (006,'LM005','BL000008','20-04-2012','05-05-2012','05-05-2012','','R0');

SELECT * FROM LMS_BOOK_ISSUE;
DESCRIBE LMS_BOOK_ISSUE;


SELECT M.MEMBER_ID,M.MEMBER_NAME,M.MEMBERSHIP_STATUS,F.FINE_RANGE,F.FINE_AMOUNT,B.BOOK_TITLE FROM  LMS_BOOK_ISSUE I
INNER JOIN LMS_MEMBERS M  ON M.MEMBER_ID=I.MEMBER_ID
INNER JOIN LMS_FINE_DETAILS F  ON F.FINE_RANGE=I.FINE_RANGE
INNER JOIN LMS_BOOK_DETAILS B ON B.BOOK_CODE=I.BOOK_CODE WHERE FINE_AMOUNT>0;